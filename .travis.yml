sudo: required
dist: trusty
language: node_js
node_js:
- '6.10'
services:
- docker
before_install:
- sudo apt-get update
- sudo apt-get install -y sshpass
script:
- echo "no tests at the moment"
after_success:
- if [ $TRAVIS_PULL_REQUEST == "false" ]; then
  docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS;
  export REPO=noefc/api;
  export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH ; fi`;
  docker build -f Dockerfile -t $REPO:$COMMIT .;
  docker tag $REPO:$COMMIT $REPO:$TAG;
  docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER;
  docker push $REPO;
  export SSHPASS=$DEPLOY_PASS;
  sshpass -e ssh $DEPLOY_USER@$DEPLOY_HOST $DEPLOY_PATH/deploy.sh;
  fi
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: GX75ZIdH8aUlqhQUoXzRE4rswzO+CGGTuyKk8IVMhea39s3js+oYvv9sXaR3vZeKq58Z2s0Tm5FmqM6nqnwwKAsxB+YGbwpeR9pTJRf8SuEXJt24ZExMdCzJqHF+3m9z65rbLKz2NyZENXPhihx2JvTiEAcvYiA6pC6c14VWwMsFm2imUI+rC8WXipkfKMPw7h1l9laVZqZ9Y2x1eA7TYe6TaqAjI9D2r/fOqbt5VgXd79+/BxCm1pgglwwCkkeiCVK90HfLZsIVT2eNGAse1wKCVPmuWTfac62ky9hrrCIIMPqmz3T6tV/+MP1KMZ0s432RDt6SRpTxcSYB+V8h5oAQJdTZqayKyHmKsRcdWkXYqrVHg4Ko0HAHMmiivC4GSoBceXPjFojrJFno4WpobII2ATPbi7CaOyJ3NF6klcwK754B+NI4+ok2EteWgquwHuW6ygALqOSHV/XpSWwpyaM9jJNORSm9fPLNSp0EKIaNPx/vX3gH2Kdeki1kFsow6qbcWdnxUV9/Nae+qlf3mTnB0lo4HiXv19MqlA4l1CTZwAjm+MWppqCoCbbjh3EN1Nfg4anekjpK+t7daI0VL0UpxEuJdQdYw1Pmg0KZLEoeoeMwtXOJYZ0z55JjgxZ0CQyRI0q04I2NoIlLHYPU4gTnh1N535oEMPTpPiXkalI=
  - secure: qLRUfU3x3jyE3C50oTRtvM4VDqWeLFRlpQ6882Nc8yzjDHDcmM5uPAJdtdrv9AwStT9HWrD4O8AykGcNyNq0PnnP023ZPmiizh1kPpCDQSNzWRNl8BfBU2QuYpWFp1lp9DW6D0qXmQEXIb4Ged8wbMI9pXMHtlyfsM4lGYaDK0PewEqxkwEldpZKJdJLFtg2u9QMiG437SQbVepcBatM+3UWy33C7osP5EB0Iujd6jlFVr+ZhfsXmLQoiUcUCTG7EBM8hSrDFE3oGAgtWrjxgH8aQPJqd0AOQSYX7jQdda6IDtcIPR+HA9qnQYw1vzxAwEX0ggasvb8EOCbUquNElzye6xf3vFQt9KMEJUlfeJKWx1reD/QzBYya681Be9dzlQ/a4sL6fgN0OH0HllAmUtHPBG1dnEryTmYn0jA6fY8kZ/qGDMt+P/WBg2BH4RiJalQgkAJmLp/ScKpsAvvyffpYVUl7EoBN5WQLsdsjItr/MfByzVGY6Qal0oBQGsfY1R9joQeU81T9qodKVmjVitdeFCCkbUWzL8tijXARCdwunACucv10lZj+Jg/3wmaH7t4QLIztEwrl6T/ZwHf0oE83dbcLvXNVKwRn0EjRGzkwJW8mIC56fpBVtT9WwXcYdbjLNFJ7S+CQTg5fHAmbA7l8ZAH2Qxj9wzxHzVxH4wY=
  - secure: vx6+9A7xU4wI6JS2/Mn9OjaE6LoQzNhOPxwRozPHTWoi3+66vaF99vPF639GpBAyERTTQT897U4l4gMrN8dLT3R0CZS/ukJy89ssiiu8cFWoFSMqby3g2EfNOfdyF280MwCMymP0hXyN28DDgjZ1xeddpYcimoJ5F4vfkkI/BdVL729CQySQ/D5JoeAhJcixDnfZlmamj4CGTA74PUpSD6UA1yDg1fNTx5U2ZyFWCGsI2f3nGk5nFiLTOy7TY/bZ4jhP/0vWRWQ9V4O1AhEg3QrGbAM85hXHJOJhjEUq2//Wy601dTG/fegam9zG9iBfABW50NX8wpAxdFowLoKi6wcSsqXXP2+bAhZ005TQ7LEEb6p8e2OTeun8041X1z9aWWBwmXoOzHZ43/xfI0yGbIJkNlPu7xgftyFFzydf9ssUR5V68ZTbN5cgjzmEzuBYyHhkEjiinMqbngPECj4gioc1xfql332/bgaqm15quFt4tg9QkTMKrXFDvRg6SSfvBleDCif5tM3UQOprgDXdXrBg8zjbaQzD6hn0vfo78V2kCOlU2pxM6PuzZBiOdL1vkY2ADiZHgDYgsZ20OwSD40vTdHC7YJSdb3TFnDc1hIbpby9S696HV3UfYY+xo/NS/xBcSeO1vFzz8ZtiGXW5P8dJFy0l1sZa7fn/fJJL5Fc=
  - secure: AaW0lxQaNFK2DMGfxKf9wQfmbkDQLTITQrPLe1fmSkqObwuIgd8Jhuly7oMz/SLjGai0NCyGAG+W9/lk+/Jr0TeSs3XtLBG6aYz1ySz0Ky3JGqf8sb4DXRCmnrN/9x8ywgLjVSY/ThnlXD4LQGFL5+xsnT/ywGNATHIwVe7Kc3k4SXNnmJ1EvYPpS0iBqUU/PCtA3x2KhdNzMrvI30bM0iJyrmgmVFKBDx3prEFSXlZN2+39t5wc83qMdu9wzXQLeKduNkbuLMJz5ko1mV/svJ0sXs5yq6lmzag/Je18wVluqDNYmRKgN+RzWdiBnOoix9Lt5XL6q4XGDB6XwFcXslvYF9tcOAX7SYWrnpyMcCk08YmR7jXOLa0sygRt/wwZOrJJVcGEqhjf0myKyGlXsXLID+yvHFyDv0LgOCTO3q6EuIft2uWdZR4pyqgwpuWY3TkUFKFpce5KiUl8B8kCAeX58/dJ/plnRyqVzaL/MtzFkZPQbNsM9IitLz0+kWVFvJ4T3FbN9b6ylRAeY0Nfy6x23vpu2uj58JlojmgTCnZWe+tLNgRoNFf/YEoHFHuHUIBNEaYv9B+StoUoh4v7vbfuaMFj+tbg8k4uK5/PrGhPzNAjjaXgyyYpjyEodRYYT1Fxq6GSgwrzL6Z5CX7BCKvoy1r9tbe8y5JNerYaRzk=
  - secure: rx6ic85FrQALow3/Kw/jqmy8D6hOOllXbE+VWUfQFiSs3m194odINlNGy3LgqXscJIpDLliksUetpnW7EhzU1aMxLm2BcuDaysCsDP/wqFSyWGJ51nT6uNU27BfE4aC+JgQ/H104fOZeRoSdPtCVRKvpWHn4nzXEUiBa3ri/SQqm32QHFW6jTp2vod2lgP+bOAMxk7vhIQThXvA04xcjPJiWtna8yyEHIHOXXIHU/YTaDW33qAUhUYA3WCyKecy6e86qwSfY78rUs6132VAdXu6UysrTcVDZTh0cTenUvA3aE6NtpvwAU1xdX9E1lKG50GObsQ+f6+Q7iBvsAq1dFLs0c5iNvsfws99y1eLjzQt1UIa02HEWo0X1XP4MMLhepp9xJeKJQ88nGh7FH8n6m45QWtbiRe61/ygPt8YuSbJUwDKQ4WszqjCwDhhua2gZbLNDIdtkfrw42Sj80xUQQhywD3C/wHR15rXxUal4NWPtSDbYdxjZ+GpPHdpim5FkaN7s1VKV0cu+xP23cfoAaV0NCFqigS9sLVZ1cksk4JtZdpHsSrhEAHEuW9t0s6/UFYyayDMR4f5U1Mf1hg/7xiEShcVo8qTgydvIkmIIUCqsQ50YwVX+RnFldODPJMoAkXXMQKuq3sUdUfa+l1r8f1Tkp3CEXdFNki6DjfwAiCk=
  - secure: 6xxlLdr1BsDAN4GrinBu20qIsWR54wqFrZGgi7OfbzEriZm7X7Ufcd8WEFhwM2BiW1nXZs9w23/uc+VjYWg2oHp6dXq6Ya0N1PNn0khrmlpkyXi476JW/ZVls7a+qD7fS0wHIBR5aHut00K/0tLk5EJTDlK7q8QjMDtyzrCbSiBE8EcEvsSX3Y5vccNnBsBn2B4Flqp/V07mk4WEDrw32+Fn2z5E9hwxJyT4F9OaMKq0EOGJkoGFDa1OeEFh8gn48kom2ebItc+9NbW2EEILS86RCbNbSAxkz6TCsyIB1mn/Rkh2KbLXAVPw2LyA/axRYPPA0smbQ6ulKmx5FxDLCsscqCAkcycyo0dVmVcRr6Hlsno0XaQ9rP8mUDpm6nfrSKrLvhIv76CNucaBhNZI2K92baddxqVP/3AN6sjQp997UlbwA9wgea24hpNTwxBN6GK39pNRUlwy+u2Docfhj1RhtCRyB/FycQ8BGPDiXpsz9R7hBVhYhFpasEzF7IzUKqlRk3otgp54R//b2wK9+IgJThxgODZhdMeCVFs13YBfysQMqXMjXsCzoieT0S788IdPwhdp4J0hLsDBDTAd1zEvIlitd1ajnqhP+2SiSYjLu4hLw2Uh9CtezIK4yEoTI/T6Ax7P6oWs0l9tFrDaEwmzC8lKk7g6m8/JaUlhztA=
  - secure: 7s1k7RqNLR1MYSmzLhfa12HyyhytL0cMk1GN+nQb5+QusjL2bUB0ivF9WXSX2NfUOhlvPFApkD7YKp1Ex6cTuvsj49nYlZrzUgcvKOVA79br5XwikWfSqjGCj6NGljspG1wDVRYN/zwcRkkcoDUz+MbNmrVtJ6KW4UdS3r6TXF+fbdIr0OQjLxPsk5+KhIaLv2NTUBfjmoN/apxD4VrV4Bene4x+aIa0OGPNLF2Pr0tA83W62mT8IfJ4u/mH3vBXc4i/YIge2nfNBBQ7tYjdBSt7IIC+BrYkrKCRDgywNejeecD24iLCryKaPIwT6tPp20OvglYep1AbfIXzMhKft32kRKzCmpynbWI+8sR7vFSGne4QuH+uUIevm+RpTZK38mtwxeoRfg+EpvxL38hoLDzK3CYg4GCxic6OE6KDak/z03uCaxdHJq/VjqxgFQzNbJBJJrDFzV4Q/uEa0JACcHdGO5QCSbd+Ktv4ie8pO2OFp6OteDeRsvODcNL++LLNmbUxyVeDnnyTyWgq7uzHkfeBJl1XZB8yRmVxZFJ51rJ7g+mgr5uLLOMKRQlbDIRIqJ677gUu3URaotiiE0vk7/Z5cH4NhbgwKlgM3tOvvuT4rbI0Oqf7hQiXxKOaZric159c6bEmvI33A6LbGIvEPab6lH9fiYvvtmsVguanaGQ=
